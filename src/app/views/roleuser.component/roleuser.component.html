<div *ngIf="datafromapi; else LoadSuccess">
  <div class="container p-3">
    <div class="mt-3">
      <h2>กลุ่มผู้ใช้งาน</h2>
      <table style="width: 50vw">
        <thead>
          <tr>
            <th colspan="3">ค้นหารายชื่อ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th colspan="3">
              ชื่อ - สกุล :
              <select id="dropdown" style="width: 150px;" [(ngModel)]="selectedUserId" (change)="setUserID(selectedUserId)" >
                <option *ngFor="let data of filteredUsers; let i = index" [value]="data.id"  >
                  {{i+1}}.{{ data.fullname }}
                </option>
              </select>
              <button class="btn btn-sm btn-success ms-3" (click)="addUser(idUser)">เพิ่ม</button>
            </th>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <div>
        <table style="width: 50vw">
          <thead>
            <tr>
              <th colspan="3">ชื่อ-นามสกุล</th>
            </tr>
          </thead>
          <tbody>
            <tr style="width: 75vw" *ngFor="let data of AlluserWithThisRole; let i = index">
              <td colspan="2" style="width: 75vw;">{{ data.fullname }}</td>
              <td colspan="1">
                <button class="btn btn-sm btn-danger" (click)="removeUser(i)">ลบ</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <br />
    <button class="btn btn-sm btn-warning" (click)="saveRoleUsers()" >บันทึก</button>
  </div>
</div>

<ng-template #LoadSuccess>
  <loading-page></loading-page>
</ng-template>
