<div *ngIf="datafromapi == true; else LoadSuccess">
  <div>
    <div class="container">
      <h2>จัดการหลักเกณฑ์ CBEs</h2>
      <div class="mt-3 d-flex">
        <div class="group">
          <svg class="icon" aria-hidden="true" viewBox="0 0 24 24"><g><path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path></g></svg>
          <input [(ngModel)]="searchQuery" name="searchbar" placeholder="คำค้นหา" type="search" class="input">
        </div>
        <button class="ms-3 btn btn-sm btn-info" (click)="onSearch()">ค้นหา</button>
        <button class="ms-3 btn btn-sm btn-danger">กล่องขยะ</button>
        <button class="ms-3 btn btn-sm btn-success">เพิ่ม</button>
      </div>
      <table class="mt-3">
        <thead >
          <tr>
            <th style="width: 600px">หัวข้อ</th>
            <th style="width: 100px">สถานะ</th>
            <th style="width: 400px">จัดการ</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="usesearch == true">
            <tr *ngFor="let data of filteredCBEs">
              <td class="text-start">{{ data.thaiName }} ({{ data.engName }})</td>
              <td *ngIf="data.isActive == true">ใช้งาน</td>
              <td *ngIf="data.isActive == false">เลิกใช้งาน</td>
              <td>
                <div class="d-flex">
                  <button class="btn btn-sm btn-warning ms-3" (click)="onEdit(data.id)">แก้ไข</button>
                  <button class="btn btn-sm btn-dark ms-3">ผู้รับผิดชอบ</button>
                  <button class="btn btn-sm btn-info ms-3">ประวัติการแก้ไข</button>
                  <button class="btn btn-sm btn-danger ms-3">ลบ</button>
                </div>
              </td>
            </tr>
          </ng-container>
          <ng-container *ngIf="usesearch == false">
          <tr *ngFor="let data of AllCBEs">
            <td class="text-start">{{ data.thaiName }} ({{ data.engName }})</td>
            <td class="text-center" *ngIf="data.isActive == true">ใช้งาน</td>
            <td class="text-center" *ngIf="data.isActive == false">เลิกใช้งาน</td>
            <td class="text-center">
              <div class="d-flex">
                <button class="btn btn-sm btn-warning ms-3" (click)="onEdit(data.id)">แก้ไข</button>
                <button class="btn btn-sm btn-dark ms-3">ผู้รับผิดชอบ</button>
                <button class="btn btn-sm btn-info ms-3">ประวัติการแก้ไข</button>
                <button class="btn btn-sm btn-danger ms-3" (click)="onDelete(data.id)">ลบ</button>
              </div>
            </td>
          </tr>
        </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>
<ng-template #LoadSuccess>
  <loading-page></loading-page>
</ng-template>
